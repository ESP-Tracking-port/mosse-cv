option(MOSSE_PORTABLE "Only include libraries that can be ported on an embedded platform" OFF)
set(CMAKE_CXX_STANDARD 11)
cmake_minimum_required(VERSION 2.8)
project(mosse)
add_subdirectory(lib)
add_subdirectory(portsrc)

if (NOT MOSSE_PORTABLE)
	# Executable
	find_package(OpenCV REQUIRED PATHS /home/dmurashov/bin/libopencv/lib/cmake NO_DEFAULT_PATH)
	include_directories(src)
	FILE(GLOB_RECURSE sourcefiles "src/*.cpp")
	add_executable( mosse ${sourcefiles} )
	target_link_libraries( mosse ${OpenCV_LIBS} mosselibs embmosse)
	target_compile_options(mosse PRIVATE -g)
	file(GLOB SRCTEST "test/*.cpp")
	# Tests
	add_executable(mossetest ${SRCTEST})
	target_link_libraries(mossetest PRIVATE embmosse ${OpenCV_LIBS})
	target_compile_options(mossetest PRIVATE "-g")
endif()
